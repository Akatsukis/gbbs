(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{102:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return o})),a.d(n,"metadata",(function(){return i})),a.d(n,"toc",(function(){return c})),a.d(n,"default",(function(){return l}));var r=a(3),t=a(7),s=(a(0),a(120)),o={id:"run",title:"Running Benchmarks"},i={unversionedId:"run",id:"run",isDocsHomePage:!1,title:"Running Benchmarks",description:"The applications take the input graph as input as well as an optional",source:"@site/docs/run.md",slug:"/run",permalink:"/gbbs/docs/run",version:"current",sidebar:"docs",previous:{title:"Compile",permalink:"/gbbs/docs/compile"},next:{title:"Graph Formats",permalink:"/gbbs/docs/formats"}},c=[{value:"Running code on compressed graphs",id:"running-code-on-compressed-graphs",children:[]},{value:"Running code on binary-encoded graphs",id:"running-code-on-binary-encoded-graphs",children:[]}],p={toc:c};function l(e){var n=e.components,a=Object(t.a)(e,["components"]);return Object(s.b)("wrapper",Object(r.a)({},p,a,{components:n,mdxType:"MDXLayout"}),Object(s.b)("p",null,'The applications take the input graph as input as well as an optional\nflag "-s" to indicate a symmetric graph.  Symmetric graphs should be\ncalled with the "-s" flag for better performance. For example:'),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-sh"},"# For Bazel:\n$ bazel run //benchmarks/BFS/NonDeterministicBFS:BFS_main -- -s -src 10 ~/gbbs/inputs/rMatGraph_J_5_100\n$ bazel run //benchmarks/IntegralWeightSSSP/JulienneDBS17:wBFS_main -- -s -w -src 15 ~/gbbs/inputs/rMatGraph_WJ_5_100\n\n# For Make:\n$ ./BFS -s -src 10 ../../../inputs/rMatGraph_J_5_100\n$ ./wBFS -s -w -src 15 ../../../inputs/rMatGraph_WJ_5_100\n")),Object(s.b)("p",null,"Note that the codes that compute single-source shortest paths (or centrality)\ntake an extra ",Object(s.b)("inlineCode",{parentName:"p"},"-src")," flag. The benchmark is run four times by default, and can\nbe changed by passing the ",Object(s.b)("inlineCode",{parentName:"p"},"-rounds")," flag followed by an integer indicating the\nnumber of runs."),Object(s.b)("p",null,'On NUMA machines, adding the command "numactl -i all " when running\nthe program may improve performance for large graphs. For example:'),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-sh"},"$ numactl -i all bazel run [...]\n")),Object(s.b)("h2",{id:"running-code-on-compressed-graphs"},"Running code on compressed graphs"),Object(s.b)("p",null,"We make use of the bytePDA format in our benchmark, which is similar to the\nparallelByte format of Ligra+, extended with additional functionality. We have\nprovided a converter utility which takes as input an uncompressed graph and\noutputs a bytePDA graph. The converter can be used as follows:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-sh"},"# For Bazel:\nbazel run //utils:compressor -- -s -o ~/gbbs/inputs/rMatGraph_J_5_100.bytepda ~/gbbs/inputs/rMatGraph_J_5_100\nbazel run //utils:compressor -- -s -w -o ~/gbbs/inputs/rMatGraph_WJ_5_100.bytepda ~/gbbs/inputs/rMatGraph_WJ_5_100\n\n# For Make:\n./compressor -s -o ../inputs/rMatGraph_J_5_100.bytepda ../inputs/rMatGraph_J_5_100\n./compressor -s -w -o ../inputs/rMatGraph_WJ_5_100.bytepda ../inputs/rMatGraph_WJ_5_100\n")),Object(s.b)("p",null,"After an uncompressed graph has been converted to the bytepda format,\napplications can be run on it by passing in the usual command-line flags, with\nan additional ",Object(s.b)("inlineCode",{parentName:"p"},"-c")," flag."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-sh"},"# For Bazel:\n$ bazel run //benchmarks/BFS/NonDeterministicBFS:BFS_main -- -s -c -src 10 ~/gbbs/inputs/rMatGraph_J_5_100.bytepda\n\n# For Make:\n$ ./BFS -s -c -src 10 ../../../inputs/rMatGraph_J_5_100.bytepda\n$ ./wBFS -s -w -c -src 15 ../../../inputs/rMatGraph_WJ_5_100.bytepda\n")),Object(s.b)("p",null,"When processing large compressed graphs, using the ",Object(s.b)("inlineCode",{parentName:"p"},"-m")," command-line flag can\nhelp if the file is already in the page cache, since the compressed graph data\ncan be mmap'd. Application performance will be affected if the file is not\nalready in the page-cache. We have found that using ",Object(s.b)("inlineCode",{parentName:"p"},"-m")," when the compressed\ngraph is backed by SSD results in a slow first-run, followed by fast subsequent\nruns."),Object(s.b)("h2",{id:"running-code-on-binary-encoded-graphs"},"Running code on binary-encoded graphs"),Object(s.b)("p",null,"We make use of a binary-graph format in our benchmark. The binary representation\nstores the representation we use for in-memory processing (compressed sparse row)\ndirectly on disk, which enables applications to avoid string-conversion overheads\nassociated with the adjacency graph format described below. We have provided a\nconverter utility which takes as input an uncompressed graph (e.g., in adjacency\ngraph format) and outputs this graph in the binary format. The converter can be\nused as follows:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-sh"},"# For Bazel:\nbazel run //utils:compressor -- -s -o ~/gbbs/inputs/rMatGraph_J_5_100.binary ~/gbbs/inputs/rMatGraph_J_5_100\n\n# For Make:\n./compressor -s -o ../inputs/rMatGraph_J_5_100.binary ../inputs/rMatGraph_J_5_100\n")),Object(s.b)("p",null,"After an uncompressed graph has been converted to the binary format,\napplications can be run on it by passing in the usual command-line flags, with\nan additional ",Object(s.b)("inlineCode",{parentName:"p"},"-b")," flag. Note that the application will always load the binary\nfile using mmap."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-sh"},"# For Bazel:\n$ bazel run //benchmarks/BFS/NonDeterministicBFS:BFS_main -- -s -b -src 10 ~/gbbs/inputs/rMatGraph_J_5_100.binary\n\n# For Make:\n$ ./BFS -s -b -src 10 ../../../inputs/rMatGraph_J_5_100.binary\n")),Object(s.b)("p",null,"Note that application performance will be affected if the file is not already\nin the page-cache. We have found that using ",Object(s.b)("inlineCode",{parentName:"p"},"-m")," when the binary graph is backed\nby SSD or disk results in a slow first-run, followed by fast subsequent runs."))}l.isMDXComponent=!0},120:function(e,n,a){"use strict";a.d(n,"a",(function(){return u})),a.d(n,"b",(function(){return d}));var r=a(0),t=a.n(r);function s(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){s(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function c(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var p=t.a.createContext({}),l=function(e){var n=t.a.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},u=function(e){var n=l(e.components);return t.a.createElement(p.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return t.a.createElement(t.a.Fragment,{},n)}},h=t.a.forwardRef((function(e,n){var a=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=l(a),h=r,d=u["".concat(o,".").concat(h)]||u[h]||b[h]||s;return a?t.a.createElement(d,i(i({ref:n},p),{},{components:a})):t.a.createElement(d,i({ref:n},p))}));function d(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=a.length,o=new Array(s);o[0]=h;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var p=2;p<s;p++)o[p]=a[p];return t.a.createElement.apply(null,o)}return t.a.createElement.apply(null,a)}h.displayName="MDXCreateElement"}}]);