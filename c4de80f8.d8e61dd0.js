(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{131:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return u}));var r=n(1),a=n(6),i=(n(0),n(147)),o={id:"install",title:"Install and Compile"},l={id:"install",title:"Install and Compile",description:"## Requirements",source:"@site/docs/install.md",permalink:"/gbbs/docs/install",sidebar:"docs",previous:{title:"Introduction",permalink:"/gbbs/docs/introduction"},next:{title:"Running Benchmarks",permalink:"/gbbs/docs/run"}},c=[{value:"Requirements",id:"requirements",children:[]},{value:"Installation",id:"installation",children:[]},{value:"Compiling the Benchmarks",id:"compiling-the-benchmarks",children:[]},{value:"Cleaning the Build",id:"cleaning-the-build",children:[]},{value:"Other Build Options",id:"other-build-options",children:[]}],s={rightToc:c};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"requirements"},"Requirements"),Object(i.b)("h4",{id:"system-and-compiler-requirements"},"System and Compiler Requirements"),Object(i.b)("p",null,"GBBS should work on Linux, Mac, and Windows machines, although primary\ndevelopment and testing is done on Linux. The only requirement is a\nrelatively recent C++ compiler with C++17 support. Specifically, we\nrecommend:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"g++ >= 7.4.0 with support for Cilk Plus or"),Object(i.b)("li",{parentName:"ul"},"g++ >= 7.4.0 with pthread support (Homemade Scheduler from\n",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/cmuparlay/parlaylib"}),"ParlayLib"),")")),Object(i.b)("p",null,"You should also be able to use GBBS in conjunction with a version of\nLLVM supporting C++17 that has support for Cilk linguistic features,\nwhich can be found ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"http://cilk.mit.edu/"}),"here"),"."),Object(i.b)("h4",{id:"build-system-requirements"},"Build System Requirements"),Object(i.b)("p",null,"We support two methods for building our code:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://docs.bazel.build/versions/master/install.html"}),"Bazel"),". This is the primary build method that we use."),Object(i.b)("li",{parentName:"ul"},"Make.")),Object(i.b)("p",null,"Note that Make is a secondary method for building and tinkering with\nGBBS that we support for users who do not wish to install Bazel.\nHowever, all of our performance numbers are collected through binaries\nbuilt by Bazel, and so Bazel should be used if using the benchmarks in\na performance-critical setting."),Object(i.b)("p",null,"The default compilation uses a lightweight scheduler provided by\n",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/cmuparlay/parlaylib"}),"ParlayLib")," for parallelism,\nwhich results in comparable performance to Cilk Plus. The half-lengths\nfor certain functions such as histogramming are lower using Homemade,\nwhich results in better performance for codes like KCore."),Object(i.b)("h2",{id:"installation"},"Installation"),Object(i.b)("p",null,"Please download our repository from our\n",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://www.github.com/ldhulipala/gbbs"}),"github"),"."),Object(i.b)("p",null,"Note that if you are contributing to the repo and check out the repo\nthorugh ssh, you can save yourself some nuisance re-typing your github\npassword every push by using\n",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://kb.iu.edu/d/aeww"}),"ssh-agent + ssh-add"),"."),Object(i.b)("h2",{id:"compiling-the-benchmarks"},"Compiling the Benchmarks"),Object(i.b)("h4",{id:"using-bazel"},"Using Bazel"),Object(i.b)("p",null,"You can build the benchmarks as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"# For Bazel:\n$ bazel build //...  # compiles all benchmarks\n")),Object(i.b)("p",null,"Note that our bazel configuration file builds optimized binaries using\nthe",Object(i.b)("inlineCode",{parentName:"p"},"-c opt")," mode by default. You can build a debug binary by\nexplicitly supplying the ",Object(i.b)("inlineCode",{parentName:"p"},"-c dbg")," option to bazel."),Object(i.b)("h4",{id:"using-make"},"Using Make:"),Object(i.b)("p",null,"First set the appropriate environment variables. For example, if you\nwould like to compile with Cilk Plus first run ",Object(i.b)("inlineCode",{parentName:"p"},"export CILK=1"),". If no\noptions are set, the default is to use the homegrown scheduler.\nAfter that, build using ",Object(i.b)("inlineCode",{parentName:"p"},"make"),"."),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"$ cd benchmarks/BFS/NonDeterministicBFS  # go to a benchmark\n$ make -j  # build the benchmark with all threads\n")),Object(i.b)("h2",{id:"cleaning-the-build"},"Cleaning the Build"),Object(i.b)("p",null,"The following commands cleans the directory:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"# For Bazel:\n$ bazel clean  # removes all executables\n\n# For Make:\n$ make clean  # removes executables for the current directory\n")),Object(i.b)("h2",{id:"other-build-options"},"Other Build Options"),Object(i.b)("h4",{id:"graphs-with-more-than-232-edges"},"Graphs with more than 2^32 Edges"),Object(i.b)("p",null,"To compile codes for graphs with more than 2^32 edges, the ",Object(i.b)("inlineCode",{parentName:"p"},"LONG")," command-line\nparameter should be set. If the graph has more than 2^32 vertices, the\n",Object(i.b)("inlineCode",{parentName:"p"},"EDGELONG")," command-line parameter should be set. Note that the codes have not\nbeen tested with more than 2^32 vertices, so if any issues arise\nplease mail ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"mailto:laxman@mit.edu"}),"laxman@mit.edu"),"."),Object(i.b)("h4",{id:"specifying-different-schedulers"},"Specifying Different Schedulers"),Object(i.b)("p",null,"To compile with the Cilk Plus scheduler instead of the Homegrown scheduler, use\nthe Bazel configuration ",Object(i.b)("inlineCode",{parentName:"p"},"--config=cilk"),". To compile using OpenMP instead, use\nthe Bazel configuration ",Object(i.b)("inlineCode",{parentName:"p"},"--config=openmp"),". To compile serially instead, use the\nBazel configuration ",Object(i.b)("inlineCode",{parentName:"p"},"--config=serial"),". (For the Makefiles, instead set the\nenvironment variables ",Object(i.b)("inlineCode",{parentName:"p"},"CILK"),", ",Object(i.b)("inlineCode",{parentName:"p"},"OPENMP"),", or ",Object(i.b)("inlineCode",{parentName:"p"},"SERIAL")," respectively.)"))}u.isMDXComponent=!0},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),u=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},b=function(e){var t=u(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},h=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),b=u(n),h=r,d=b["".concat(o,".").concat(h)]||b[h]||p[h]||i;return n?a.a.createElement(d,l({ref:t},s,{components:n})):a.a.createElement(d,l({ref:t},s))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);